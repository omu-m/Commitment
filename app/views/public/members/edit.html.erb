<div class="container">
  <div class="row">
    <div class="col-5 px-0 mx-auto">
      <div class="mb-4　mt-5">
        <h4><strong>会員情報編集</strong></h4>
      </div>

      <%= form_with model: @member, url: update_information_path, local: true do |f| %>
      <div class="field mb-4 mt-5">
        <%= f.label :display_name, "表示名" %>
        <%= f.text_field :display_name, autofocus: true, autocomplete: "display_name", class: "form-control" %>
      </div>
      <div class="field mb-4">
        <%= f.label :user_name, "ユーザーネーム" %>
          <br><span class="text">※『半角英数字(a-z/0-9)』のみ使用できます。</span></td>
        <%= f.text_field :user_name, autocomplete: "user_name", class: "form-control" %>
      </div>
      <div class="field mb-4">
        <%= f.label :email, "メールアドレス" %>
        <%= f.email_field :email, autocomplete: "email", class: "form-control" %>
      </div>
      <div class="field mb-4">
        <%= f.label :profile_image, "プロフィール画像（変更する場合は選択してください。）" %><br>
        <img id="preview" src="/assets/no_image.jpeg" class="member-icon" style="width: 100px; height: 100px">
        <%= f.file_field :profile_image, accept: "image/*", onchange: "previewImage(this);" %>
      </div>
      <div class="actions mt-3 text-center">
        <th><%= f.submit "編集内容を保存", class: "btn btn-success mr-5" %></th>
        <th><%= link_to "退会する" , confirm_unsubscribe_path, class: 'btn btn-danger' %></th>
      </div>
     <% end %>
   </div>
  </div>
</div>

<script>
  $('#member_profile_image').on('change', function (e) {
    var reader = new FileReader();
    reader.onload = function (e) {
        $("#preview").attr('src', e.target.result);
    }
    reader.readAsDataURL(e.target.files[0]);
  });
</script>